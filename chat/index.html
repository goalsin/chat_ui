<!DOCTYPE html>
<html lang="zh-cn"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>simple chat</title>
	
    <!-- Bootstrap core CSS -->
    <link href="app/bootstrap/css/bootstrap.css" rel="stylesheet">

	  <!-- custom CSS -->
 	<link rel="stylesheet" href="app/css/bootstrap.vertical-tabs.css">
	  
	<link href="app/css/speech.css" rel="stylesheet">
	 
    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.0/html5shiv.min.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
			
			<style>
		/*	body {
			  padding-top: 20px;
			  padding-bottom: 20px;
			}*/

			.navbar {
			  margin-bottom: 20px;
			}
			
			.navbox {
			-moz-box-shadow: 0 1px 1px #e0e0e0;
			-webkit-box-shadow: 0 1px 1px #e0e0e0;
			box-shadow: 0 1px 1px #e0e0e0;
			}
			.navbox {
			height: 60px;
			border-top: 1px solid #FFFFFF;
			position: relative;
			z-index: 9;
			background: #FFFFFF;
			margin-bottom: 20px;
			}
		/*	body{
				padding: 0;
				margin: 0;
			}
			*/
			</style>
  </head>

  <body style="">
    <div class="container" style='background:lightblue;'>
		<div class="col-lg-12">
		    <div class="col-xs-10">
		        <!-- Tab panes -->
				<div class="tab-content">
					<div class="tab-pane" id="home-r">						
						<div class="panel panel-default">
						  <div class="panel-heading">
							  <h3 class="panel-title">
								  跟我一起学html5-db
								  <span >
									  
								  </span>
								  <div class="dropdown" style='float:right'>
								    <a id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
								      大纲
									  <span class="caret">
								      	
								      </span>
								    </a>


								    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
								       <li role="presentation"><a role="menuitem" tabindex="-1" href="#">1.step 1</a></li>
								       <li role="presentation"><a role="menuitem" tabindex="-1" href="#">2.step 2</a></li>
								       <li role="presentation"><a role="menuitem" tabindex="-1" href="#">3.step 3</a></li>
								       <li role="presentation" class="divider"></li>
								       <li role="presentation"><a role="menuitem" tabindex="-1" href="#">4.step 4</a></li>
								     </ul>
									 
								  </div>
								  
							  </h3>
						  </div>
						  <div class="panel-body">
							   。。。。。。
							   
							   <div class="row">
							     <div class="col-sm-6 col-md-4">
							       <div class="thumbnail">
							         <img data-src="holder.js/300x200" alt="...">
							         <div class="caption">
							           <h3>Thumbnail label</h3>
							           <p>...</p>
							           <p><a href="#" class="btn btn-primary" role="button">Button</a> <a href="#" class="btn btn-default" role="button">Button</a></p>
							         </div>
							       </div>
							     </div>
								 
							     <div class="col-sm-6 col-md-4">
							       <div class="thumbnail">
							         <img data-src="holder.js/300x200" alt="...">
							         <div class="caption">
							           <h3>Thumbnail label</h3>
							           <p>...</p>
							           <p><a href="#" class="btn btn-primary" role="button">Button</a> <a href="#" class="btn btn-default" role="button">Button</a></p>
							         </div>
							       </div>
							     </div>
								 
							     <div class="col-sm-6 col-md-4">
							       <div class="thumbnail">
							         <img data-src="holder.js/300x200" alt="...">
							         <div class="caption">
							           <h3>Thumbnail label</h3>
							           <p>...</p>
							           <p><a href="#" class="btn btn-primary" role="button">Button</a> <a href="#" class="btn btn-default" role="button">Button</a></p>
							         </div>
							       </div>
							     </div>
								 
							   </div>
							   
							    
							   
						  </div>
						</div>
					</div>
					<div class="tab-pane" id="category-r">分类 Tab.</div>
					<div class="tab-pane active" id="chat-r">
						
						<div class="col-lg-4">
							<div class="panel panel-default">
							  <div class="panel-heading">
								  <h3 class="panel-title">
									  联系人
								  </h3>
							  </div>
							  <div class="panel-body">
								   <ul class="list-group">
								     <li class="list-group-item">Cras justo odio</li>
								     <li class="list-group-item">Dapibus ac facilisis in</li>
								     <li class="list-group-item">Morbi leo risus</li>
								     <li class="list-group-item">Porta ac consectetur ac</li>
								     <li class="list-group-item">Vestibulum at eros</li>
								   </ul>
								   
							  </div>
							</div>
							
							<div class="panel panel-default">
							  <div class="panel-heading">
								  <h3 class="panel-title">
									  群组
								  </h3>
							  </div>
							  <div class="panel-body">
								   <ul class="list-group">
								     <li class="list-group-item">Cras justo odio</li>
								     <li class="list-group-item">Dapibus ac facilisis in</li>
								     <li class="list-group-item">Morbi leo risus</li>
								     <li class="list-group-item">Porta ac consectetur ac</li>
								     <li class="list-group-item">Vestibulum at eros</li>
								   </ul>
								   
							  </div>
							</div>
							
						</div>
						
						<div class="col-lg-8">
							<div class="panel panel-default">
							  <div class="panel-heading">
								  <h3 class="panel-title">
									  聊天 Tab.	  
								  </h3>
							  </div>
							  <div class="panel-body">
						   		<div class='msg_box_container' style='height:440px;display:block;'> 
						   			<div class='msg_box' style='height:440px;display:block;border:1px red;'> 
						   				<div id='income_msg' style='border:1px red;height:400px;overflow:scroll;'>

						   				</div>
						   			</div>
 
						   			<div class='msg_box' style='display:none;'>
						   				<h1>发送的消息</h1>
						   				<div id='outgo_msg'>

						   				</div>
						   			</div>
						   		</div>
								
								<form role="form">
								  <div class="form-group">
								    <label for="exampleInputEmail1">chat message</label>
								    <input type="text" class="form-control" id="text" placeholder="请输入聊天内容">
								  </div>
					 
								  <div class="checkbox">
								    <label>
								      <input type="checkbox"> Check me 
								    </label>
								  </div>
								  <button type="button" id='send_btn' class="btn btn-default">Submit</button>
								</form>
								 
						   		
							  </div>
							</div>
							
						</div>
						
					</div>
					<div class="tab-pane" id="log-r">日志 Tab.</div>
					<div class="tab-pane" id="task-r">任务 Tab.</div>
				</div>
		    </div>

		    <div class="col-xs-2"> 
				<!-- required for floating -->
				<!-- Nav tabs -->
		        <ul class="nav nav-tabs tabs-right">
					<li class="active">
						<a href="#chat-r" data-toggle="tab">聊天</a>
					</li>
					<li><a href="#category-r" data-toggle="tab">分类</a></li>
					<li><a href="#home-r" data-toggle="tab">首页</a></li>
					<li><a href="#log-r" data-toggle="tab">日志</a></li>
					<li><a href="#task-r" data-toggle="tab">任务</a></li>
		        </ul>
		    </div>
		</div>
    </div> <!-- /container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="app/js/jquery-2.1.0.js"></script>
    <script src="app/bootstrap/js/bootstrap.min.js"></script>
  	<script>
		$('.nav-tabs a').click(function (e) {
		  e.preventDefault()
		  $(this).tab('show')
		})
	</script>

	<script type="text/javascript" src="app/js/faye.js"></script>
	<script type="text/javascript" src="app/js/fayehelper.js"></script>

	<script>	  
		function get_query_string_value_with_key(item){
			var svalue = location.search.match(new RegExp("[\?\&]" 
						+ item 
						+ "=([^\&]*)(\&?)","i"));
			
			return svalue ? svalue[1] : svalue;
		}

		function send(){
			var v = $('#text').val();
			if(v.length ==0 ) return;
			r_log_info(v+'----');
		}

		$(function(){
		 
		 	var user_name = get_query_string_value_with_key('name');
			console.log(user_name);
			// var c = new FayeHelper('http://106.187.49.166:9200/faye',channel);
			
			c = chat_with_person("sabng",'#message_selector');
			c.from_user = {
				name		: 	'alfred',
				nickname	: 	user_name,
				avatar		: 	'http://l.ruby-china.org/user/big_avatar/4491.jpg'
			};
			
			c.to_user = {
				name		: 	'zhangting',
				nickname	: 	'张婷1',
				avatar		: 	'http://l.ruby-china.org/user/big_avatar/8904.jpg'
			};
			
			$('#send_btn').click(function(){
				// send();
				var v = $('#text').val();
				if(v.length ==0 ) return;
				
				c.send(v);
			});
		
			$("body").bind('keyup',function(event) {  
				if(event.keyCode==13){  
					send();
				}     
			});   
		
		});
	</script>
</body></html>